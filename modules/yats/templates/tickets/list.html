{% extends "base.html" %}

{% load bootstrap_toolkit i18n %}

{% block title %}
    {% trans "ticket list" %}
{% endblock %}

{% block content %}
    
    <h2>{% if is_search %}{% trans "search results for tickets" %}&nbsp;<a class="btn btn-small" href="/tickets/search/?new=1">{% trans "new search" %}</a>&nbsp;<a role="button" data-toggle="modal" class="btn btn-small" href="#saveDlg">{% trans "save search" %}</a>{% else %}{% trans "tickets" %}{% endif %}</h2>
    
    <p>&nbsp;</p>
    
    {% if lines %}
    <p>{{ lines.start_index }} - {{ lines.end_index }} {% trans "of" %} {{ lines.paginator.count }}</p>
    <section id="no-more-tables">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th>{% trans "state" %}</th>
                <th>{% trans "ticket#" %}</th>
                <th>{% trans "created" %}</th>
                <th>{% trans "type" %}</th>
                <th>{% trans "caption" %}</th>
            </tr>
            </thead>
              {% for line in lines %}
                <tr>
                	<td data-title="{% trans "state" %}"><button type="button" class="btn {% if ticket.closed %}btn-danger{% else %}btn-success{% endif %}" disabled></td>
                    <td data-title="{% trans "ticket#" %}"><a href="/tickets/view/{{ line.id }}/">{{ line.id }}</a></td>
                    <td data-title="{% trans "created" %}">{{ line.c_date }}</td>
                    <td data-title="{% trans "type" %}">{{ line.type }}</td>
                    <td data-title="{% trans "caption" %}">{{ line.caption }}</td>
                </tr>
            {% endfor %}
        </table>
    
        {{ lines|pagination }}
    </section>
    {% endif %}
    {% if lines.paginator.count == 0 %}
    {% trans "no tickets found!" %}
    {% endif %}
    
    {% if is_search %}
    <div id="saveDlg" class="modal hide fade">
        
        <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h3>{% trans "save as report" %}</h3>
        </div>
        
        <form class="form-{{ layout }}" action="" method="post">
        <div class="modal-body"> 
				<div class="control-group">
					<label class="control-label" for="id_deadline">{% trans "report name" %}</label>
					<div class="controls">
						<div class="input-append reportname">
    						<input id="id_reportname" name="reportname" type="text" />
						</div>
					</div>
				</div>            	
		</div>
        
        <div class="modal-footer">
            <a href="#" class="btn" data-dismiss="modal">{% trans "cancel" %}</a>
            <input type="submit" value="{% trans "save" %}" class="btn btn-primary">
        </div>
        </form>
    </div>
    {% endif %}
{% endblock %}